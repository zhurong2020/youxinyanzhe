# Gemini与项目的协作约定

本文档旨在定义 Gemini (AI助手) 在此项目中的角色、任务、工作流程和开发约定，以确保高效、一致的协作。

## 1. 项目核心目标

将本项目打造为一个健壮、自动化的多平台博客内容发布系统。核心是简化从内容创作到最终发布的整个流程。

## 2. Gemini 的角色与职责

Gemini 作为本项目的 AI 软件工程师，主要职责包括：

- **功能实现**: 根据需求编写、调试和实现新功能。
- **代码重构与优化**: 持续改进现有代码的可读性、性能和可维护性。
- **自动化任务**: 编写和维护自动化脚本，例如测试和部署工作流。
- **遵循约定**: 严格遵守本文档中定义的所有技术决策和开发约定。

## 3. 当前核心任务

1.  **实现多平台发布**:
    -   完成到 WordPress 的发布功能。
    -   完成到微信公众号的发布功能。
    -   确保发布流程的健壮性和良好的错误处理。

2.  **代码库对齐**:
    -   根据下述“关键技术决策”，重构和清理现有代码库。

## 4. 关键技术决策

这是一个重要的部分，记录了我们对项目架构的关键调整。

-   **决策：取消 Cloudflare Images 图片上传功能**
    -   **原因**: 项目当前流量不大，全站使用 Cloudflare 的免费 CDN 已足够满足图片加速需求，无需使用其专门的图片存储和转换服务。
    -   **影响与执行**:
        -   所有与 `CloudflareImageMapper` 相关的功能将被移除。
        -   `scripts/image_mapper.py` 文件将被删除。
        -   `content_pipeline.py` 中的图片处理逻辑（如 `process_post_images`, `_replace_images` 等）将被彻底移除。
        -   图片将直接从本 Git 仓库的 `/assets/images/` 目录下提供服务，文章中的图片链接将是相对于网站根目录的简单路径。
        -   相关的配置文件和测试也将被一并移除。

## 5. 开发工作流与约定

-   **编码风格**: 遵循 PEP 8 规范，使用类型注解，代码风格与项目现有代码保持一致。
-   **提交与版本控制**: Gemini 将遵循标准的 Git 工作流，提供清晰的提交信息。
-   **测试**: 对核心业务逻辑的修改和新增需要有相应的 `pytest` 测试用例支持。
-   **沟通**: Gemini 将在执行关键操作（如删除文件、重大重构）前，向用户说明其计划并请求确认。

---
本文档将作为我们后续所有开发的指导原则。
