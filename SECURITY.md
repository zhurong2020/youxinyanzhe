# 🔒 安全配置指南

## ⚠️ 重要安全提醒

此项目包含会员系统，**fork此项目的用户需要注意以下安全事项**：

### 🚨 立即要做的事情

**⚡ 快速设置（推荐）**：
```bash
# 运行自动化安全设置脚本
./setup_for_fork.sh
```

**🔧 手动设置**：

1. **重新生成所有访问码**：
   ```bash
   # 生成新的管理员访问码
   python scripts/admin_access_generator.py admin --purpose "your_admin" --days 365
   
   # 生成测试访问码
   python scripts/admin_access_generator.py test
   ```

2. **配置环境变量**：
   ```bash
   # 复制示例配置文件
   cp .env.example .env
   
   # 编辑.env文件，设置你自己的配置
   # 不要使用任何示例中的默认值！
   ```

3. **更改所有默认设置**：
   - 邮件服务器配置
   - API密钥
   - 数据库连接（如有）
   - 会员验证逻辑（如需要）

### 🛡️ 安全最佳实践

#### 1. 敏感信息管理
- ✅ 使用环境变量存储敏感信息
- ✅ 所有密码、密钥应使用 `.env` 文件（已在 `.gitignore` 中）
- ❌ 永远不要在代码中硬编码敏感信息
- ❌ 不要提交包含真实访问码的测试文件

#### 2. 访问码安全
- 🔄 定期轮换管理员访问码
- 📝 记录访问码的生成和使用情况
- 🗑️ 及时撤销不再使用的访问码
- 👥 为不同用户/团队生成独立的访问码

#### 3. 开源项目安全
- 📋 定期检查提交历史中的敏感信息
- 🧹 使用 `git filter-branch` 清理历史记录（如必要）
- 📖 在 README 中提供安全配置说明
- ⚡ 提供脚本自动化安全配置

### 🔧 自动化安全检查

运行安全检查脚本：
```bash
# 检查代码中的潜在敏感信息
python scripts/security_check.py

# 运行完整的安全清理（推荐在首次fork后运行）
python scripts/security_cleanup.py
```

### 🛠️ 开发者工具

**新增的安全工具**：
- `scripts/security_check.py` - 扫描敏感信息泄露
- `scripts/security_cleanup.py` - 自动化安全清理
- `scripts/admin_access_generator.py` - 访问码管理
- `setup_for_fork.sh` - Fork用户快速设置脚本

### 📞 安全问题报告

如果发现安全漏洞，请通过以下方式私下报告：
- 邮箱：[您的安全邮箱]
- 创建私有GitHub issue

**请不要在公开issue或论坛中讨论安全漏洞！**

### 🔄 定期安全维护

建议每3个月进行一次安全审查：
- [ ] 检查访问码有效期
- [ ] 审查用户访问日志
- [ ] 更新依赖包
- [ ] 检查环境配置
- [ ] 测试访问控制功能

---

## 📋 快速安全配置清单

**Fork项目后必须完成的安全配置**：

- [ ] 重新生成所有管理员和测试访问码
- [ ] 配置自己的 `.env` 文件
- [ ] 更改邮件服务器设置
- [ ] 修改默认的API配置
- [ ] 运行安全检查脚本
- [ ] 测试会员验证功能
- [ ] 定期备份访问码数据

**⚠️ 完成上述配置前，请不要部署到生产环境！**